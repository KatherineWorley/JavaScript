<!DOCTYPE html>
<html>
<head>
	<title>Functions</title>
</head>
<body>


	<script type="text/javascript">

// Load a single image by constructing an <img> tag, adding an onload event listener, and setting the img src attribute
function loadImage(src, callback) {
  var img = document.createElement('img');
  img.addEventListener('load', function() { callback(img); } , false);
  img.src = src;
}	

// Start your game loop once the image has completed loading

function run(sprites) {
  // game loop goes here
}

loadImage("images/sprites", run);

// Nested callback
	
loadImage("images/sprites", function(sprites) {
  // game loop goes here
});


// Loading Multiple Images
function loadImages(names, callback) {

  var n,name,
      result = {},
      count  = names.length,
      onload = function() { if (--count == 0) callback(result); };

  for(n = 0 ; n < names.length ; n++) {
    name = names[n];
    result[name] = document.createElement('img');
    result[name].addEventListener('load', onload);
    result[name].src = "images/" + name + ".png";
  }

}

// Start your game loop once all of the images have completed loading:

var IMAGES = ['player', 'monsters', 'backgrounds'];

function run(images) {
  // game loop goes here
}

loadImages(IMAGES, run);


// Loading a JSON File

function loadJSON(url, onsuccess) {
  var request = new XMLHttpRequest();
  request.onreadystatechange = function() {
    if ((request.readyState == 4) && (request.status == 200)) // if DONE and SUCCESS
      onsuccess(JSON.parse(request.responseText));
  }
  request.open("GET", url + ".json", true);
  request.send();
}

// error handling

function startLevel(level) {
  // go!
}

loadJSON('level1', startLevel);

// Game Loops
// game loop that can update() and render() our game world.

while(true) {  // UH OH! - blocks UI thread
  update();
  render();
}

// Timestamps




	</script>

</body>
</html>